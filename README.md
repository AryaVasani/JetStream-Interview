# Identity Management and Access Validation System

Validates user access to applications and returns their permissions by syncing identity data from Auth0 to PostgreSQL.

## What It Does

**Input:** Username + Application name  
**Output:** Access status (true/false) + List of permissions

**Example:**
```bash
python manage_access.py alice@example.com Google
# Output: User alice@example.com has access to Google → Permissions: ['Docs:Read', 'Docs:Write', 'Sheets:Read', 'Sheets:Write']
```

## Tech Stack Rationale

**Auth0** - Identity provider

**PostgreSQL** - Relational database

**FastAPI** - Python API framework

**SQLAlchemy** - Object Relational Mapper

## Quick Start

### 1. Setup
```bash
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate
pip install -r requirements.txt
```

### 2. Configure (.env file)
```env
AUTH0_DOMAIN=https://dev-xxxxx.us.auth0.com
AUTH0_CLIENT_ID=your_client_id
AUTH0_CLIENT_SECRET=your_client_secret
DATABASE_URL=postgresql://localhost/identity_management
```

### 3. Initialize & Sync
```bash
python -c "from models import init_db; init_db()"
python idp_sync.py
```

### 4. Usage

**Command-line:**
```bash
python manage_access.py alice@example.com Google
```

**API:**
```bash
python api.py  # Start server
curl "http://localhost:8000/access/alice@example.com/Google"
```

**Interactive Docs (generated by FastAPI):**
```
http://localhost:8000/docs
```

## Project Files

- `models.py` - Database schema (users, groups, roles, permissions, applications)
- `idp_sync.py` - Syncs data from Auth0
- `api.py` - REST API server
- `check_access.py` - Command-line tool

## How It Works

```
Auth0 → idp_sync.py → PostgreSQL → api.py/check_access.py → Result
```

1. Sync fetches users, groups, apps from Auth0
2. Stores relationships in PostgreSQL
3. CLI/API queries database for access decisions

4. Returns access status + specific permissions

